import{u as j,R as k,j as e}from"./app-SAv3pY7b.js";import{B as p}from"./button-D_FlYygu.js";import{I as i}from"./input-CS5VRPbH.js";import{L as l}from"./label-BLrks6Sf.js";function N({initialValues:n={},subscription:t,onSubmit:h,submitting:o}){const{props:x}=j(),a=x.errors||{},c=t?.check_interval??1,[s,u]=k.useState({name:n.name||"",url:n.url||"",check_interval:n.check_interval?Math.floor(n.check_interval/60):c,timeout:n.timeout||5,is_active:n.is_active??!0}),m=(r,d)=>{u(_=>({..._,[r]:d}))},v=r=>{if(r.preventDefault(),t?.max_websites&&t.websites_count!==void 0&&t.websites_count>=t.max_websites){alert(`Your current plan (${t.plan_name}) allows a maximum of ${t.max_websites} websites.`);return}if(s.check_interval<c){alert(`Your plan requires a minimum check interval of ${c} minutes.`);return}const d={...s,check_interval:s.check_interval*60};h(d)};return e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Website Name"}),e.jsx(i,{id:"name",value:s.name,onChange:r=>m("name",r.target.value),required:!0,className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name[0]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"url",children:"URL"}),e.jsx(i,{id:"url",type:"url",value:s.url,onChange:r=>m("url",r.target.value),required:!0,className:a.url?"border-red-500":""}),a.url&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.url[0]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"check_interval",children:"Check Interval (minutes)"}),e.jsx(i,{id:"check_interval",type:"number",min:c,max:60,value:s.check_interval,onChange:r=>m("check_interval",parseInt(r.target.value)||0),className:a.check_interval?"border-red-500":""}),a.check_interval&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.check_interval[0]}),t?.check_interval&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Minimum allowed by your plan: ",t.check_interval," minutes"]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"timeout",children:"Timeout (seconds)"}),e.jsx(i,{id:"timeout",type:"number",min:5,max:120,value:s.timeout,onChange:r=>m("timeout",parseInt(r.target.value)),className:a.timeout?"border-red-500":""}),a.timeout&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.timeout[0]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.is_active,onChange:r=>m("is_active",r.target.checked)}),e.jsx(l,{children:"Active"})]}),t&&e.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 p-3 text-sm text-gray-700",children:[e.jsxs("p",{children:["Plan: ",e.jsx("strong",{children:t.plan_name})]}),t.max_websites&&e.jsxs("p",{children:["Websites: ",t.websites_count,"/",t.max_websites]})]}),e.jsx(p,{type:"submit",disabled:o,children:o?"Saving...":"Save Website"})]})}export{N as W};
