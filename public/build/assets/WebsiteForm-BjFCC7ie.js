import{u as _,R as j,j as e}from"./app-krQUAcTU.js";import{B as k}from"./button-Ct1FR__d.js";import{I as c}from"./input-Bb5xnWrk.js";import{L as m}from"./label-nlyRaT7r.js";function b({initialValues:l={},subscription:t,onSubmit:i,submitting:d}){const{props:o}=_(),a=o.errors||{};console.log("subscription",t);const[s,h]=j.useState({name:l.name||"",url:l.url||"",check_interval:l.check_interval||60,timeout:l.timeout||5,is_active:l.is_active??!0}),n=(r,u)=>{h(v=>({...v,[r]:u}))},x=r=>{if(r.preventDefault(),t?.max_websites&&t.websites_count!==void 0&&t.websites_count>=t.max_websites){alert(`Your current plan (${t.plan_name}) allows a maximum of ${t.max_websites} websites.`);return}if(t?.check_interval&&s.check_interval<t.check_interval){alert(`Your plan requires a minimum check interval of ${t.check_interval} seconds.`);return}i(s)};return e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Website Name"}),e.jsx(c,{id:"name",value:s.name,onChange:r=>n("name",r.target.value),required:!0,className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name[0]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"url",children:"URL"}),e.jsx(c,{id:"url",type:"url",value:s.url,onChange:r=>n("url",r.target.value),required:!0,className:a.url?"border-red-500":""}),a.url&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.url[0]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"check_interval",children:"Check Interval (seconds)"}),e.jsx(c,{id:"check_interval",type:"number",min:t?.check_interval||60,max:3600,value:s.check_interval,onChange:r=>n("check_interval",parseInt(r.target.value)),className:a.check_interval?"border-red-500":""}),a.check_interval&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.check_interval[0]}),t?.check_interval&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Minimum allowed by your plan: ",t.check_interval," seconds"]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"timeout",children:"Timeout (seconds)"}),e.jsx(c,{id:"timeout",type:"number",min:5,max:120,value:s.timeout,onChange:r=>n("timeout",parseInt(r.target.value)),className:a.timeout?"border-red-500":""}),a.timeout&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.timeout[0]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.is_active,onChange:r=>n("is_active",r.target.checked)}),e.jsx(m,{children:"Active"})]}),t&&e.jsxs("div",{className:"rounded border border-gray-200 bg-gray-50 p-3 text-sm text-gray-700",children:[e.jsxs("p",{children:["Plan: ",e.jsx("strong",{children:t.plan_name})]}),t.max_websites&&e.jsxs("p",{children:["Websites: ",t.websites_count,"/",t.max_websites]})]}),e.jsx(k,{type:"submit",disabled:d,children:d?"Saving...":"Save Website"})]})}export{b as W};
